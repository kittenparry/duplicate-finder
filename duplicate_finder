#!/usr/bin/env python3

import os
import tkinter as tk
import platform

class COL:
	FAIL = '\033[91m'
	WARNING = '\033[93m'
	UNDERLINE = '\033[4m'
	BOLD = '\033[1m'
	ENDC = '\033[0m'

def get_files():
	LOOP_PARTITION_LETTERS = ['d', 'e', 'f', 'g', 'h', 'j']
	LOOP_PATH = [
		os.path.join('Archive', 'porn', 'vids'),
		os.path.join('Archive', 'porn', 'pics'),
		os.path.join('Downloads', 'porn'),
		os.path.join('arch', 'porn') # same as ARCH_DIR
	]
	dirs_prefix = []
	for letter in LOOP_PARTITION_LETTERS:
		dirs_prefix.append(os.path.join('/mnt', 'disk-%s' % letter))

	dirs_models = []
	for prefix in dirs_prefix:
		for suffix in LOOP_PATH:
			try:
				# append full path to model names
				dirs_models += [os.path.join(prefix, suffix, item) for item in os.listdir(os.path.join(prefix, suffix))]
			except FileNotFoundError:
				pass
			except Exception as e:
				print(e)

	# list of all files & directories
	obj_names = []
	obj_path = []
	for dire in dirs_models:
		try:
			obj_names += os.listdir(dire)
			obj_path += [os.path.join(dire, item) for item in os.listdir(dire)]
		except Exception as e:
			print(e)

	# names & paths to duplicates
	obj_list = []
	for n, name in enumerate(obj_names):
		if obj_names.count(name) > 1:
			obj = lambda: None
			obj.name = name
			obj.path = obj_path[n]
			obj_list.append(obj)

	# sort list by obj names
	obj_list = sorted(obj_list, key=lambda x: x.name)

	for n, obj in enumerate(obj_list):
		print('---')
		print(obj.name)
		print(obj.path)

	# currently prints names of the actors
	# so, i'll likely need to listdir paths to these names

	# then put the output of those into a list
	# and their paths into a separate list as previously "planned"

	# might not need a gui after all
	# use colours

class Gui(tk.Frame):
	def __init__(self, master = None):
		tk.Frame.__init__(self, master)

# FIXME: actual geometry values for actual program
def get_geometry():
	if platform.system() == 'Linux':
		program_width = 605
		screen_width = 1920
		x_position = (screen_width - program_width) / 2
		geo_str = '%dx505+%d+30' % (program_width, x_position)
	return ''

def start_gui():
	root = tk.Tk(className='duplicate_finder')
	if platform.system() == 'Linux':
		root.tk.call('tk', 'scaling', 1.3)
	root.title('duplicate_finder')
	root.geometry(get_geometry())
	app = Gui(master=root)
	app.mainloop()

if __name__ == '__main__':
	# get_files()
	start_gui()
